---
story_id: STORY-008
title: Implement Organization Tasks (4 tasks)
epic_id: EPIC-001
phase: 1
priority: high
estimated_effort: 20 hours
status: todo
created: 2025-11-04

user_story: |
  As a developer
  I want to create the organization workflow tasks
  So that agents can analyze, fragment, and link notes systematically

acceptance_criteria:
  - Implement organize-analyze-atomicity.md task in tasks/ directory
  - Implement organize-fragment-note.md task in tasks/ directory
  - Implement organize-query-semantic-similarity.md task in tasks/ directory
  - Implement organize-create-bidirectional-link.md task in tasks/ directory
  - All tasks follow BMAD task specification format
  - Tasks include algorithmic logic
  - Tasks specify quality thresholds

technical_notes: |
  Task 1: analyze-atomicity.md
  - Input: Note content
  - Process: Apply atomicity tests
  - Output: Boolean (is_atomic) + violations list + building_block_type
  - Atomicity tests:
    - Single claim test: Count distinct claims (should be 1)
    - Evidence test: Evidence doesn't introduce new claims
    - Self-contained test: Note understandable without excessive context
    - Title test: Title is descriptive and unique
  - Building block types: concept, argument, model, question, claim, phenomenon

  Task 2: fragment-note.md
  - Input: Non-atomic note + atomicity analysis
  - Process: Identify split points, create fragment plans
  - Output: N new atomic notes + cross-links
  - Fragmentation algorithm:
    - Identify distinct claims/concepts (semantic clustering)
    - Determine split points (paragraph boundaries, heading boundaries)
    - Preserve source attribution in all fragments
    - Create bidirectional links between fragments
    - Update original note to index note (optional)

  Task 3: query-semantic-similarity.md
  - Input: Note content
  - Process: Query Smart Connections for similar notes
  - Output: List of similar notes with similarity scores (0.0-1.0)
  - MCP tool: smart_connections.semantic_search
  - Threshold: Minimum similarity 0.6 for suggestions

  Task 4: create-bidirectional-link.md
  - Input: Source note + target note + link type + strength
  - Process: Add wikilink in both notes, create Neo4j relationship
  - Output: Updated notes with wikilinks, Neo4j [:LINKED_TO] relationship
  - Link types: supports, contradicts, elaborates, analogous_to, generalizes, specializes
  - MCP tools: obsidian.update_note (x2), graphiti.add_relation (optional)

dependencies:
  - STORY-001: Expansion pack infrastructure
  - STORY-003: Structural Analysis Agent (consumer)
  - STORY-004: Semantic Linker Agent (consumer)
  - atomicity-checklist.md
  - linking-quality-checklist.md

testing:
  - Analyze atomic note (should pass)
  - Analyze non-atomic note (should detect violations)
  - Fragment note with 3 concepts
  - Query semantic similarity (should return relevant results)
  - Create bidirectional link (verify in both notes)
  - Test Neo4j relationship creation

definition_of_done:
  - All 4 task files created in tasks/ with organize- prefix
  - Tasks follow BMAD specification format
  - Algorithmic logic documented
  - Quality thresholds specified
  - MCP tool dependencies documented
  - Tasks tested individually and in workflows
  - Documentation added to developer guide
