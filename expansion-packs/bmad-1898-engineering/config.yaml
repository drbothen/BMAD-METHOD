# <!-- Powered by BMAD‚Ñ¢ Core -->
name: bmad-1898-engineering
version: 0.1.0
short-title: 1898 Security Engineering
description: >-
  Security-focused expansion pack providing specialized agents, workflows, and
  tools for vulnerability management, CVE enrichment, and security operations.
  Includes Security Analyst agent with AI-assisted research capabilities,
  integrated JIRA ticket management, and multi-factor risk assessment framework.
author: 1898 & Co.
slashPrefix: bmad-1898

# JIRA Integration Configuration
# Configure these values for your JIRA instance
#
# How to find your JIRA Cloud ID:
#   1. Go to https://admin.atlassian.com/
#   2. Select your organization
#   3. Go to Products ‚Üí Your Jira site
#   4. Cloud ID is shown in the site details (UUID format)
#   OR use Atlassian API: GET https://api.atlassian.com/oauth/token/accessible-resources
#
# How to find Custom Field IDs:
#   1. Go to JIRA ‚Üí Settings (gear icon) ‚Üí Issues ‚Üí Custom Fields
#   2. Find your field name (e.g., "CVE ID", "Affected Systems")
#   3. Click "..." menu ‚Üí "Edit" or hover to see field ID
#   4. Field ID format: customfield_10001, customfield_10002, etc.
#   OR inspect issue JSON via API: GET /rest/api/3/issue/{issueKey}
#
jira:
  cloud_id: "YOUR_CLOUD_ID_HERE" # JIRA Cloud instance ID (UUID format, see above)
  project_key: "YOUR_PROJECT_KEY" # Project key visible in issue IDs (e.g., AOD-123 ‚Üí use "AOD")

  custom_fields:
    # Ticket Metadata Fields
    cve_id:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "text"
      label: "CVE ID"
      validation: "^CVE-\\d{4}-\\d{4,7}$"

    affected_systems:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "text"
      label: "Affected Systems"

    asset_criticality_rating:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "select"
      label: "Asset Criticality Rating"
      options: ["Critical", "High", "Medium", "Low"]

    system_exposure:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "select"
      label: "System Exposure"
      options: ["Internet-Facing", "Internal", "Isolated"]

    # Security Enrichment Fields (Story 1.6)
    cvss_score:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "number"
      label: "CVSS Base Score"
      min: 0.0
      max: 10.0
      decimals: 1

    epss_score:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "number"
      label: "EPSS Score"
      min: 0.0
      max: 1.0
      decimals: 2

    kev_status:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "select"
      label: "CISA KEV Status"
      options: ["Listed", "Not Listed"]

    exploit_status:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "select"
      label: "Exploit Availability"
      options: ["None", "PoC", "Public Exploit", "Active Exploitation"]

    # Event Investigation Fields (Story 7.1)
    disposition:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "select"
      label: "Disposition"
      options: ["True Positive", "False Positive", "Benign True Positive"]

    confidence_level:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "select"
      label: "Confidence Level"
      options: ["High", "Medium", "Low"]

    next_actions:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "text"
      label: "Next Actions"

    investigation_duration:
      field_id: "customfield_XXXXX" # EXAMPLE - Replace with actual field ID
      field_type: "text"
      label: "Investigation Duration"

  # Priority Mapping for Multi-factor Assessment (Story 1.7)
  priority_mapping:
    P1: "Critical" # Highest priority
    P2: "High"
    P3: "Medium"
    P4: "Low"
    P5: "Trivial" # Lowest priority

# Review Triggering Configuration (Story 3.4)
# Controls which tickets require QA review based on priority
review_triggers:
  P1:
    review_required: true
    sampling_rate: 100
    rationale: "Critical vulnerabilities require 100% QA to prevent high-impact errors"
    assignment: "senior-reviewer"
    blocking: true

  P2:
    review_required: true
    sampling_rate: 100
    rationale: "High vulnerabilities require 100% QA to ensure quality remediation"
    assignment: "senior-reviewer"
    blocking: true

  P3:
    review_required: false
    sampling_rate: 25
    rationale: "Medium vulnerabilities benefit from 25% sampling to maintain quality while managing resources"
    assignment: "any-reviewer"
    blocking: false

  P4:
    review_required: false
    sampling_rate: 10
    rationale: "Low vulnerabilities need minimal QA (10% sampling) to detect systemic issues"
    assignment: "any-reviewer"
    blocking: false

  P5:
    review_required: false
    sampling_rate: 5
    rationale: "Informational items need very low QA (5% sampling) for process improvement"
    assignment: "any-reviewer"
    blocking: false

# Reviewer Assignment Configuration (Story 3.4)
# Customize reviewer names, specializations, and notification settings for your team
reviewer_assignment:
  method: "priority-weighted-round-robin"

  reviewers:
    - name: "Alex"
      role: "senior-reviewer"
      specializations: ["web-vulnerabilities", "infrastructure"]
      max_concurrent: 5
      priorities: ["P1", "P2", "P3", "P4", "P5"]

    - name: "Jordan"
      role: "senior-reviewer"
      specializations: ["application-security", "cryptography"]
      max_concurrent: 5
      priorities: ["P1", "P2", "P3", "P4", "P5"]

    - name: "Taylor"
      role: "reviewer"
      specializations: ["network-security"]
      max_concurrent: 8
      priorities: ["P3", "P4", "P5"]

  assignment_rules:
    P1:
      pool: ["Alex", "Jordan"]
      method: "least-loaded"
      fallback: "any-senior-reviewer"

    P2:
      pool: ["Alex", "Jordan"]
      method: "least-loaded"
      fallback: "any-senior-reviewer"

    P3:
      pool: ["Alex", "Jordan", "Taylor"]
      method: "round-robin"
      fallback: "any-available-reviewer"

    P4:
      pool: ["Taylor"]
      method: "round-robin"
      fallback: "any-available-reviewer"

    P5:
      pool: ["Taylor"]
      method: "round-robin"
      fallback: "any-available-reviewer"

  notification:
    method: "jira-assignment" # Primary: JIRA ticket assignment with auto-notification
    additional: ["email", "slack"] # Optional: Additional notification channels

    email:
      enabled: false # Set to true to enable email notifications
      smtp_server: "smtp.example.com"
      from_address: "security-ops@example.com"
      subject_template: "[JIRA] {ticket_id} ({priority}) assigned for review"
      body_template: |
        You have been assigned to review security ticket {ticket_id}.

        Priority: {priority}
        CVE: {cve_id}
        Review Type: {review_type}

        Access ticket: {jira_url}

    slack:
      enabled: false # Set to true to enable Slack notifications
      webhook_url: "https://hooks.slack.com/services/YOUR/WEBHOOK/URL"
      channel: "#security-reviews"
      message_template: |
        üîç *Review Assignment*

        *Ticket:* <{jira_url}|{ticket_id}>
        *Priority:* {priority}
        *Reviewer:* @{reviewer_name}
        *Type:* {review_type}

    error_handling:
      fallback_to_jira_only: true # If email/Slack fail, still assign in JIRA
      retry_count: 2
      retry_delay_seconds: 30
      log_failures: true
      log_file: "logs/notification-errors.log"

# Metrics Configuration
# Controls metrics collection, storage, and retention for performance tracking
metrics:
  # Enable/disable metrics collection
  enabled: true

  # Metrics output directory
  output_dir: "metrics"

  # Metrics files
  enrichment_metrics: "enrichment-metrics.csv"
  review_metrics: "review-metrics.csv"
  lifecycle_metrics: "lifecycle-metrics.csv"
  review_decisions: "review-decisions.csv"

  # Retention policy (days)
  retention_days: 365

  # Aggregation intervals for reporting
  aggregation:
    - "daily"
    - "weekly"
    - "monthly"

# Advanced Configuration
# Optional advanced settings for workflow customization and tuning
advanced:
  # Enrichment workflow customization
  enrichment:
    default_quality_threshold: 75 # Minimum quality score target
    max_duration_minutes: 20 # Maximum enrichment duration before warning
    auto_save_interval_seconds: 60 # Workflow state save interval

  # Review workflow customization
  review:
    default_quality_threshold: 60 # Minimum acceptable quality score
    max_duration_minutes: 25 # Maximum review duration before warning
    fact_verification_mandatory_priorities: ["P1", "P2"] # Priorities requiring fact verification

  # Lifecycle workflow customization
  lifecycle:
    sla_buffer_percentage: 10 # SLA escalation buffer (escalate at 90% of SLA)
    state_file_cleanup_hours: 24 # Clean up orphaned state files after hours

  # Logging configuration
  logging:
    level: "INFO" # DEBUG, INFO, WARN, ERROR
    file: "logs/bmad-1898-engineering.log"
    max_size_mb: 100
    backup_count: 5
