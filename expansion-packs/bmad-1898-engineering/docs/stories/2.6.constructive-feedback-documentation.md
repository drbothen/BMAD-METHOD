# Story 2.6: Constructive Feedback Documentation

## Status

Draft

## Story

**As a** Security Reviewer agent,
**I want** to structure review findings using review template,
**so that** feedback is clear, actionable, and blameless.

## Acceptance Criteria

1. Agent uses security-review-report-tmpl.yaml
2. Acknowledges strengths first
3. Identifies gaps with impact explanation
4. Provides specific recommendations
5. Links to learning resources
6. Maintains respectful, constructive tone

## Tasks / Subtasks

- [ ] Create security review report template (AC: 1)
  - [ ] Create `templates/security-review-report-tmpl.yaml`
  - [ ] Define all required sections (Strengths, Findings, Recommendations)
  - [ ] Include instructions for constructive feedback
  - [ ] Add variable substitution placeholders
- [ ] Implement Strengths section (AC: 2)
  - [ ] Identify what analyst did well
  - [ ] Acknowledge thorough research
  - [ ] Recognize correct methodology
  - [ ] Highlight quality sections
  - [ ] Start review on positive note
- [ ] Implement Findings section (AC: 3)
  - [ ] Categorize by Critical/Significant/Minor
  - [ ] Explain impact of each gap
  - [ ] Use constructive language (not blame)
  - [ ] Provide specific location references
  - [ ] Link gaps to learning opportunities
- [ ] Implement Recommendations section (AC: 4)
  - [ ] Provide specific, actionable fixes
  - [ ] Include examples of correct approach
  - [ ] Prioritize recommendations (fix Critical first)
  - [ ] Offer alternative approaches where applicable
- [ ] Add learning resources (AC: 5)
  - [ ] Link to relevant knowledge base articles
  - [ ] Cite authoritative sources (NIST, CISA, etc.)
  - [ ] Provide training resources
  - [ ] Include best practice guides
- [ ] Ensure constructive tone throughout (AC: 6)
  - [ ] Use "we" and "this analysis" vs. "you" language
  - [ ] Frame as growth opportunities
  - [ ] Avoid blame or criticism
  - [ ] Be respectful and professional
  - [ ] Focus on improving process, not criticizing person

## Dev Notes

### Security Review Report Template Structure

```yaml
template:
  id: security-review-report-v1
  name: Security Enrichment Review Report
  version: 1.0
  output:
    format: markdown
    title: 'Security Review: {{ticket_id}} - {{cve_id}}'

sections:
  - id: review_metadata
    title: Review Metadata
    content: |
      **Ticket:** {{ticket_id}}
      **CVE:** {{cve_id}}
      **Analyst:** {{analyst_name}}
      **Reviewer:** {{reviewer_name}}
      **Review Date:** {{review_date}}
      **Overall Quality Score:** {{quality_score}}% ({{quality_classification}})

  - id: executive_summary
    title: Executive Summary
    instruction: |
      2-3 sentence summary of review findings. Start positive, note areas for improvement.
    content: |
      {{executive_summary}}

  - id: strengths
    title: Strengths & What Went Well
    instruction: |
      Acknowledge what the analyst did well. Start with positives to set constructive tone.
    content: |
      {{#each strengths}}
      - âœ… {{this}}
      {{/each}}

  - id: quality_scores
    title: Quality Dimension Scores
    content: |
      | Dimension | Score | Assessment |
      |-----------|-------|------------|
      | Technical Accuracy | {{technical_accuracy_score}}% | {{technical_accuracy_assessment}} |
      | Completeness | {{completeness_score}}% | {{completeness_assessment}} |
      | Actionability | {{actionability_score}}% | {{actionability_assessment}} |
      | Contextualization | {{contextualization_score}}% | {{contextualization_assessment}} |
      | Documentation Quality | {{documentation_quality_score}}% | {{documentation_quality_assessment}} |
      | MITRE ATT&CK | {{attack_mapping_score}}% | {{attack_mapping_assessment}} |
      | Cognitive Bias | {{cognitive_bias_score}}% | {{cognitive_bias_assessment}} |
      | Source Citation | {{source_citation_score}}% | {{source_citation_assessment}} |

  - id: critical_issues
    title: Critical Issues (Must Fix)
    content: |
      {{#each critical_issues}}
      ### ðŸ”´ Critical Issue {{@index}}: {{this.title}}
      **Location:** {{this.location}}
      **Issue:** {{this.description}}
      **Impact:** {{this.impact}}
      **Recommended Fix:** {{this.fix}}
      **Learn More:** [{{this.resource_title}}]({{this.resource_url}})
      {{/each}}

  - id: significant_gaps
    title: Significant Gaps (Should Fix)
    content: |
      {{#each significant_gaps}}
      ### ðŸŸ¡ Significant Gap {{@index}}: {{this.title}}
      **Location:** {{this.location}}
      **Issue:** {{this.description}}
      **Impact:** {{this.impact}}
      **Recommended Fix:** {{this.fix}}
      **Learn More:** [{{this.resource_title}}]({{this.resource_url}})
      {{/each}}

  - id: minor_improvements
    title: Minor Improvements (Nice to Have)
    content: |
      {{#each minor_improvements}}
      ### ðŸ”µ Minor Improvement {{@index}}: {{this.title}}
      **Suggestion:** {{this.description}}
      **Benefit:** {{this.benefit}}
      {{/each}}

  - id: cognitive_bias_findings
    title: Cognitive Bias Assessment
    content: |
      {{#if cognitive_biases_detected}}
      **Biases Detected:**
      {{#each cognitive_biases}}
      - **{{this.type}}:** {{this.description}}
        - **Example:** {{this.example}}
        - **Debiasing Strategy:** {{this.mitigation}}
      {{/each}}
      {{else}}
      âœ… No systematic cognitive biases detected. Analysis appears objective and data-driven.
      {{/if}}

  - id: fact_verification
    title: Fact Verification Results
    content: |
      {{#if fact_verification_performed}}
      **Accuracy Score:** {{accuracy_score}}% ({{accuracy_classification}})
      **Claims Verified:** {{claims_verified}}
      **Discrepancies:** {{discrepancies_found}}

      {{#if discrepancies}}
      **Discrepancies Found:**
      {{#each discrepancies}}
      - **{{this.claim_type}}:** Analyst claimed {{this.analyst_claim}}, authoritative source states {{this.correct_value}}
        - **Source:** [{{this.source_name}}]({{this.source_url}})
      {{/each}}
      {{/if}}
      {{else}}
      â„¹ï¸ Fact verification not performed for this review.
      {{/if}}

  - id: recommendations
    title: Recommended Actions
    content: |
      **Priority 1 (Do First):**
      {{#each priority1_actions}}
      - {{this}}
      {{/each}}

      **Priority 2 (Do Next):**
      {{#each priority2_actions}}
      - {{this}}
      {{/each}}

      **Priority 3 (When Time Permits):**
      {{#each priority3_actions}}
      - {{this}}
      {{/each}}

  - id: learning_resources
    title: Learning Resources
    content: |
      {{#each learning_resources}}
      - [{{this.title}}]({{this.url}}) - {{this.description}}
      {{/each}}

  - id: next_steps
    title: Next Steps
    content: |
      1. Address Critical Issues (must-fix before ticket proceeds)
      2. Address Significant Gaps (improve quality)
      3. Consider Minor Improvements (enhance clarity)
      4. Update enrichment comment in JIRA
      5. Re-submit for review if Critical Issues found

  - id: reviewer_notes
    title: Reviewer Notes
    content: |
      {{reviewer_notes}}
```

### Constructive Language Examples

#### Acknowledging Strengths

```markdown
## Strengths & What Went Well

- âœ… **Thorough Research:** The analyst conducted comprehensive research across multiple authoritative sources (NVD, CISA, vendor advisory).
- âœ… **Clear Remediation Guidance:** Patch version and installation instructions are specific and actionable.
- âœ… **Business Context:** Asset Criticality Rating and System Exposure were properly considered in priority assessment.
- âœ… **Source Citations:** All factual claims include authoritative source citations with URLs.
- âœ… **MITRE ATT&CK Mapping:** Tactics and techniques appropriately identified for this vulnerability type.
```

#### Presenting Gaps Constructively

**âŒ Blame Language:**

> "You forgot to check the CISA KEV catalog. This is a major oversight."

**âœ… Constructive Language:**

> "**Opportunity for Improvement:** Adding CISA KEV status would strengthen the priority assessment. The KEV catalog indicates whether CISA has observed active exploitation, which is a critical factor in risk-based prioritization. [Learn more: CISA KEV Guide]"

**âŒ Blame Language:**

> "Your CVSS score is wrong. You should have verified against NVD."

**âœ… Constructive Language:**

> "**Factual Discrepancy:** The CVSS score stated (7.5) differs from the NVD official score (9.8). This impacts the priority assessment significantly. Recommendation: Update to NVD official score and recalculate priority. [Source: NVD CVE-2024-1234]"

#### Providing Recommendations

```markdown
## Recommended Actions

**Priority 1 (Must Fix):**

1. Update CVSS score to 9.8 (per NVD) and recalculate priority assessment
2. Add CISA KEV status (Listed, date_added: 2024-11-01)
3. Correct affected version range (should be 2.0.0-2.5.32, not 2.0.0-2.5.30)

**Priority 2 (Should Fix):**

1. Add EPSS exploitation probability score to Severity Metrics section
2. Expand Business Impact Assessment to include specific business processes affected
3. Add compensating controls section (WAF rules, network segmentation)

**Priority 3 (Nice to Have):**

1. Add additional MITRE ATT&CK techniques (T1059 - Command Execution would be relevant)
2. Include vendor security advisory publication date
3. Enhance remediation section with rollback procedures
```

#### Linking Learning Resources

```markdown
## Learning Resources

- [NIST NVD User Guide](https://nvd.nist.gov/general) - How to interpret CVSS scores and vector strings
- [CISA KEV Catalog](https://www.cisa.gov/known-exploited-vulnerabilities-catalog) - Understanding Known Exploited Vulnerabilities
- [FIRST EPSS](https://www.first.org/epss/) - Exploitation Prediction Scoring System explained
- [MITRE ATT&CK for ICS](https://attack.mitre.org/) - Mapping vulnerabilities to tactics and techniques
- [BMAD-1898 Priority Framework](../.bmad-1898-engineering/data/priority-framework.md) - Multi-factor risk assessment methodology
```

### Review Tone Guidelines

**Core Principles:**

- **Blameless:** No criticism of the analyst as a person
- **Educational:** Frame as learning opportunities
- **Collaborative:** Use "we" and "the analysis" language
- **Specific:** Concrete examples, not vague criticisms
- **Actionable:** Every finding includes recommended fix
- **Balanced:** Start with strengths, then gaps
- **Respectful:** Professional and supportive tone

### Testing

**Test Location:** `expansion-packs/bmad-1898-engineering/tests/templates/`

**Test Standards:**

- Validate YAML template structure
- Test variable substitution
- Verify all sections render
- Review tone and language for constructiveness
- Test with various quality levels

**Test Cases:**

1. Excellent enrichment (90%+ score): Review should be mostly positive with minor suggestions
2. Good enrichment (75-89% score): Balanced with strengths and some gaps
3. Poor enrichment (<60% score): Many gaps but still constructive and respectful
4. Enrichment with critical errors: Clearly identify must-fix issues without blame

## Change Log

| Date       | Version | Description            | Author     |
| ---------- | ------- | ---------------------- | ---------- |
| 2025-11-06 | 1.0     | Initial story creation | Sarah (PO) |

## Dev Agent Record

### Agent Model Used

_To be populated during development_

### Debug Log References

_To be populated during development_

### Completion Notes List

_To be populated during development_

### File List

_To be populated during development_

## QA Results

_To be populated after QA review_
