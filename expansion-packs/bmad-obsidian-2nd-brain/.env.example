# =============================================================================
# Neo4j Environment Configuration Template
# =============================================================================
#
# Part of BMAD-METHOD™ Obsidian 2nd Brain Expansion Pack
#
# IMPORTANT SECURITY INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Replace placeholder values with your actual credentials
# 3. NEVER commit .env to git (it's in .gitignore)
# 4. Set file permissions: chmod 600 .env
# 5. Store credentials in password manager
#
# =============================================================================

# -----------------------------------------------------------------------------
# Neo4j Authentication
# -----------------------------------------------------------------------------

# Neo4j username (default: neo4j)
# Usually not changed unless using external authentication
NEO4J_USER=neo4j

# Neo4j password
# CRITICAL: Set a strong password before starting Neo4j
# DO NOT use default passwords like 'password', 'neo4j', or 'demodemo'
#
# Generate strong password with:
#   openssl rand -base64 32
#   or use password manager to generate
#
# Minimum requirements:
# - 16+ characters
# - Mixed case letters
# - Numbers and symbols
# - Unique to this installation
NEO4J_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD

# Note: Using Neo4j Community Edition (free, no license required)
# For Enterprise Edition, see docs/installation/neo4j-setup.md

# -----------------------------------------------------------------------------
# Neo4j Memory Configuration
# -----------------------------------------------------------------------------

# Initial heap size (JVM memory)
# Recommended: 512m for development, 1G+ for production
NEO4J_HEAP_INITIAL=512m

# Maximum heap size (should match initial for consistency)
# Adjust based on your system RAM:
#   4GB system RAM: 1G
#   8GB system RAM: 2G
#   16GB+ system RAM: 4G+
NEO4J_HEAP_MAX=1G

# Page cache size (for graph data caching)
# Recommended: ~50% of remaining RAM after heap allocation
# Example: 8GB RAM, 2G heap → 2-3G page cache
NEO4J_PAGECACHE=512m

# Memory limits for Docker container
# Should be heap + pagecache + overhead (500MB)
NEO4J_MEMORY_LIMIT=2G
NEO4J_MEMORY_RESERVATION=1G

# -----------------------------------------------------------------------------
# Neo4j Database Configuration
# -----------------------------------------------------------------------------

# Default database name
# Usually 'neo4j' unless you need multiple databases
NEO4J_DEFAULT_DB=neo4j

# Transaction timeout (how long queries can run)
# Format: number + unit (s=seconds, m=minutes)
# Increase for long-running graph queries
NEO4J_TX_TIMEOUT=300s

# Query timeout (per-query limit)
# Prevents runaway queries from blocking database
NEO4J_QUERY_TIMEOUT=60s

# Logging level
# Options: ERROR, WARN, INFO, DEBUG
# Use DEBUG only for troubleshooting (verbose)
NEO4J_LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Graphiti MCP Server Configuration
# -----------------------------------------------------------------------------

# OpenAI API Key (required for Graphiti entity extraction)
# Get from: https://platform.openai.com/api-keys
#
# CRITICAL SECURITY:
# - Never commit this key to git
# - Rotate every 90 days
# - Set usage limits in OpenAI dashboard
# - Monitor usage for unauthorized access
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI Model Selection
# Recommended models:
#   gpt-4o-mini    - Fast, cost-effective (recommended)
#   gpt-4o         - More accurate, higher cost
#   gpt-4-turbo    - Balanced performance
MODEL_NAME=gpt-4o-mini

# Anthropic API Key (alternative to OpenAI, optional)
# Get from: https://console.anthropic.com/
# Uncomment if using Anthropic models instead
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# -----------------------------------------------------------------------------
# Network Configuration (Advanced)
# -----------------------------------------------------------------------------

# Neo4j Bolt connection URI
# For Docker: bolt://localhost:7687
# For Aura Cloud: neo4j+s://<instance-id>.databases.neo4j.io
NEO4J_URI=bolt://localhost:7687

# Neo4j HTTP connection URI (for Browser UI)
NEO4J_HTTP_URI=http://localhost:7474

# -----------------------------------------------------------------------------
# Backup Configuration (Optional)
# -----------------------------------------------------------------------------

# Backup directory path
# Uncomment and set if using automated backups
# BACKUP_DIR=./backups

# Backup retention days
# How long to keep old backups
# BACKUP_RETENTION_DAYS=30

# -----------------------------------------------------------------------------
# Development vs Production Settings
# -----------------------------------------------------------------------------

# Environment type (for reference only)
# Options: development, staging, production
ENVIRONMENT=development

# Debug mode (enables verbose logging)
# Set to 'false' in production
DEBUG=true

# =============================================================================
# USAGE NOTES
# =============================================================================
#
# 1. After creating .env, verify it's not tracked by git:
#      git status --ignored | grep .env
#
# 2. Test connection with:
#      docker compose -f docker-compose.neo4j.yml up -d
#      docker compose -f docker-compose.neo4j.yml logs -f
#
# 3. Access Neo4j Browser at http://localhost:7474 and login with:
#      Username: (value of NEO4J_USER)
#      Password: (value of NEO4J_PASSWORD)
#
# 4. For Graphiti MCP setup, use these values in claude_desktop_config.json:
#      NEO4J_URI, NEO4J_USER, NEO4J_PASSWORD, OPENAI_API_KEY, MODEL_NAME
#
# =============================================================================
# SECURITY CHECKLIST
# =============================================================================
#
# Before going live, verify:
# ☐ Changed NEO4J_PASSWORD from default
# ☐ Password is 16+ characters, strong complexity
# ☐ OPENAI_API_KEY is set with usage limits
# ☐ .env is in .gitignore
# ☐ .env file permissions are 600 (chmod 600 .env)
# ☐ Credentials stored in password manager
# ☐ No credentials committed to git (git log -p | grep -i password)
# ☐ Neo4j bound to localhost only (not 0.0.0.0)
# ☐ Firewall blocks external access to ports 7474, 7687
#
# =============================================================================
